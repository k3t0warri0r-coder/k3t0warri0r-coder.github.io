<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Ketarot - Top</title>
  <link rel="stylesheet" href="./style.css">

</head>
<body>
<!-- partial:index.partial.html -->
<main id=app>

  <!--p>Please checkout the newer version of this; <a target="_top" href="https://codepen.io/simeydotme/pen/abYWJdX">https://codepen.io/simeydotme/pen/abYWJdX</a></p-->

  <!--h1>Tarot Sauc√©</h1-->
<style>
//div.gallery {
//  margin: 5px;
//  border: 0px;
//  float: left;
//  width: 180px;
//}

//div.gallery img {
//  width: 100%;
//  height: auto;
//}

</style>
  
<h1 style="text-align: center;"><strong>Top 50 des collections</strong></h1>
<div id="demo"></div>
<script>

const queryString = window.location.search;
console.log(queryString);

const urlParams = new URLSearchParams(queryString);

//ref si requis
var viewer = urlParams.get('viewer').toLowerCase()

async function Fetching()
{
    //const response = await fetch("./collectioninfo/"+ viewer +".json");
    const response = await fetch("./top50.txt");
    const jsonData = await response.json();
    //console.log(jsonData);
    //console.log(Object.keys(jsonData));

  console.log("BON MATIN");
  console.log(Object.keys(states_dictionary2).length);
  for (let i = 1; i <= 50; i++) {

    if (i < 10) {
      znumber = '0' + i;
    } else {
      znumber = i.toString();
    }

    console.log("BONJOUR");
    if (jsonData[states_dictionary2[znumber]] !== undefined) { 
        console.log("Section 1");
        if (jsonData[states_dictionary2[znumber]][2] > 0) {
            console.log("Section 1.1");
            text += '<div class="three-d-wrapper">';
            text += '<div class="card c' + znumber + 'm animated"></div>'
            text += '</div>';
        }
        else if (jsonData[states_dictionary2[znumber]][1] > 0) {
            console.log("Section 1.2");
            text += '<div class="three-d-wrapper">';
            text += '<div class="card c' + znumber + ' animated"></div>'
            text += '</div>';
        }
        else {
            console.log("Section 1.3");
            text += '<div class="three-d-wrapper">';
            text += '<div class="card2 c' + znumber + ' animated"></div>'
            text += '</div>';
        }
    }
    else {
        console.log("Section 2");
        text += '<div class="three-d-wrapper">';
        text += '<div class="card2 cback animated"></div>'
        text += '</div>';
    }

  }
  text +=  '</section>';
  document.getElementById("demo").innerHTML = text;
}
Fetching();

</script>

</main>
</body>
</html>
